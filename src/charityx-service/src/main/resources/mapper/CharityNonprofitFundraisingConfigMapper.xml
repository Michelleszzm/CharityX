<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.charity.x.dao.CharityNonprofitFundraisingConfigDao">

    <resultMap id="VoMap" type="com.charity.x.dto.vo.CharityNonprofitFundraisingConfigVo">
        <result column="id" property="id"/>
        <result column="user_id" property="userId"/>
        <result column="fundraising_template_code" property="fundraisingTemplateCode"/>
        <result column="nft_image" property="nftImage"/>
        <result column="site" property="site"/>
        <result column="style" property="style"/>
        <result column="payment" property="payment"/>
        <result column="form" property="form"/>
        <result column="allocation" property="allocation"/>
        <result column="publish" property="publish"/>
        <result column="publish_status" property="publishStatus"/>
    </resultMap>

    <sql id="Business_Column">
        id, user_id,fundraising_template_code, site, nft_image, style, payment, form, allocation, publish, publish_status
    </sql>

    <insert id="save">
        insert into charity_nonprofit_fundraising_config (
                                                          fundraising_template_code,
                                                          <if test="site != null">site,</if>
                                                          <if test="nftImage != null">nft_image,</if>
                                                          <if test="style != null">style,</if>
                                                          <if test="payment != null">payment,</if>
                                                          <if test="form != null">form,</if>
                                                          <if test="allocation != null">allocation,</if>
                                                          <if test="publish != null">publish,</if>
                                                          <if test="publishStatus != null">publish_status,</if>
                                                            user_id
                                                          )
        values (
                #{fundraisingTemplateCode},
                <if test="site != null">
                    #{site},
                </if>
                <if test="nftImage != null">
                    #{nftImage},
                </if>
                <if test="style != null">
                    #{style},
                </if>
                <if test="payment != null">
                    #{payment},
                </if>
                <if test="form != null">
                    #{form},
                </if>
                <if test="allocation != null">
                    #{allocation},
                </if>
                <if test="publish != null">
                    #{publish},
                </if>
                <if test="publishStatus != null">
                    #{publishStatus},
                </if>
        #{userId}
                )
    </insert>
    <update id="updateById">
        update charity_nonprofit_fundraising_config
        <set>
            <if test="fundraisingTemplateCode != null">
                fundraising_template_code = #{fundraisingTemplateCode},
            </if>
            <if test="site != null">
                site = #{site},
            </if>
            <if test="nftImage != null">
                nft_image = #{nftImage},
            </if>
            <if test="style != null">
                style = #{style},
            </if>
            <if test="payment != null">
                payment = #{payment},
            </if>
            <if test="form != null">
                form = #{form},
            </if>
            <if test="allocation != null">
                allocation = #{allocation},
            </if>
            <if test="publish != null">
                publish = #{publish},
            </if>
            <if test="publishStatus != null">
                publish_status = #{publishStatus},
            </if>
        </set>
            where id = #{id}
    </update>
    <select id="queryByUserId" resultMap="VoMap">
        select <include refid="Business_Column"/>
        from charity_nonprofit_fundraising_config
        where user_id = #{userId}
    </select>
    <select id="queryBySite" resultMap="VoMap">
        select <include refid="Business_Column"/>
        from charity_nonprofit_fundraising_config
        where site = #{site} and is_deleted = 0
    </select>

</mapper>